% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prep_data.R
\name{prep_data}
\alias{prep_data}
\title{Prepares data for analysis}
\usage{
prep_data(
  indicator = NULL,
  data = NULL,
  code_col = NULL,
  year_col = NULL,
  startyear_data = 2000,
  endyear_data = 2023,
  min = NULL,
  max = NULL,
  support = 1,
  granularity = 0.1,
  extreme_percentile = getOption("trackr.extreme_pctl"),
  verbose = TRUE
)
}
\arguments{
\item{indicator}{Character. Name of the column with the values of the indicator data}

\item{data}{Optional. A data frame with indicator data.}

\item{code_col}{Character. Name of the column with country codes (or other groupings used to calculate and compare progress)}

\item{year_col}{Character. Name of the column with years.}

\item{startyear_data}{Integer. First year to include in the modelling of typical experiences observed. If not provided, defaults to the minimum value of year_col.}

\item{endyear_data}{Integer. Last year to include in the modelling of typical experiences observed. If not provided, defaults to the maximum value of year_col.}

\item{min}{Numeric (optional). Minimum value of the indicator. If NULL, the minimum is computed from the data and rounded to the nearest multiple of `granularity`.
Will be overruled by support if that reflects a higher minimum value}

\item{max}{Numeric (optional). Maximum value of the indicator. If NULL, the maximum is computed from the data and rounded to the nearest multiple of `granularity`. Will be overruled by support if that reflects a lower maximum value.}

\item{support}{Numeric. Reflects minimum number of countries that must have experienced a particular outcome value from startyear_data to endyear_data for a progress score to be calculated. This limits the calculation of scores at extreme outcome values at which there is less support to evaluate what typical progress looks like. Will be overruled by min and max if those are more restrictive. Defaults to 1.}

\item{granularity}{Numeric. Granularity in outcome variable. All outcome values are rounded to the nearest value reflecting this granularity. For example, if 1 is chosen, then all outcome values are rounded to the nearest integer. Default is 0.1. The lower granularity, the more precise the estimated paths but the longer it takes to run the code.}

\item{extreme_percentile}{Numeric (length 1 or 2). Percentile(s) used to define the lower and upper tails of the distribution of initial values. Values in the tails are retained only if there is sufficient country support (`support`). If a single value is provided, it is applied symmetrically to both tails. Defaults to `getOption("trackr.extreme_pctl")`.}

\item{verbose}{Logical. If TRUE print messages in console. Default is TRUE}
}
\value{
A `list` with 3 elements: 1. data prepared for estimation, 2. min and 3. max. Min and Max are range limits for expected changes, based on floor/ceiling if provided, otherwise on observed values. Rounded to nearest granularity.
}
\description{
Prepares indicator data for estimation by computing annualized changes over 5â€“10 year periods, selecting the shortest available spell, balancing countries by number of rows, and assigning fold IDs for cross-validation.
}
